---
title: 'LayerZero V2ã§ã‚ã‚‰ã‚†ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’Berachainã«ãƒ–ãƒªãƒƒã‚¸ã™ã‚‹ [Berachainç¿»è¨³]'
tags:
  - Blockchain
  - Ethereum
  - Web3
  - DALayer
  - Berachain
private: false
updated_at: '2024-09-09T16:59:24+09:00'
id: a12f10b0dab4bce024d3
organization_url_name: sunriselayer
slide: false
ignorePublish: false
---
:::note info
æœ¬è¨˜äº‹ã¯ä¸‹è¨˜ã®ç¿»è¨³ã¨ãªã‚Šã¾ã™ã€‚
[ã€Bridge any Token to Berachain with LayerZero V2ã€](https://blog.berachain.com/blog/bridge-any-token-to-berachain-with-layerzero-v2-2)
:::

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1926720/73e4a7db-a77c-4cee-dab7-97829dfa4119.png)

### OFT ã®ç´¹ä»‹

**_Omnichain Fungible Tokens_**ï¼ˆOFTï¼‰ã¯ã€ã‚¯ãƒ­ã‚¹ãƒã‚§ãƒ¼ãƒ³ã‚¢ã‚»ãƒƒãƒˆã®ãŸã‚ã«[**LayerZero**](https://layerzero.network/?ref=berachain.ghost.io)ã«ã‚ˆã£ã¦é–‹æ‹“ã•ã‚ŒãŸæ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³è¦æ ¼ã§ã™ã€‚OFT ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚¢ã‚»ãƒƒãƒˆã®ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã‚„æµå‹•æ€§ãƒ—ãƒ¼ãƒ«ã®å¿…è¦ãªãã€ç•°ãªã‚‹ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³é–“ã§ä»£æ›¿å¯èƒ½ãªãƒˆãƒ¼ã‚¯ãƒ³ã‚’è»¢é€ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€çµ±ä¸€ã•ã‚ŒãŸä¾›çµ¦ã‚’ç¶­æŒã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

LayerZero ã¯æ±ç”¨ã®ã‚¯ãƒ­ã‚¹ãƒã‚§ãƒ¼ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ãŒã€ã“ã®è¨˜äº‹ã§ã¯ã€ç‰¹ã« OFT ã®ãƒ–ãƒªãƒƒã‚¸ãƒ³ã‚°ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™ã€‚

#### LayerZero V2

LayerZero V2 ã¯ 2024 å¹´ 1 æœˆã«ç™ºè¡¨ã•ã‚Œã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ¤œè¨¼ã¨å®Ÿè¡Œã‚’åˆ†é›¢ã™ã‚‹ã“ã¨ã§é‡è¦ãªã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’ã‚‚ãŸã‚‰ã—ã¾ã—ãŸï¼ˆã“ã‚Œã‚‰ã¯ LayerZero V1 ã§ã¯[ãƒªãƒ¬ãƒ¼ãƒ¤ãƒ¼](https://layerzero.gitbook.io/docs/ecosystem/relayer/layerzero-relayer?ref=berachain.ghost.io)ã‚’ä½¿ç”¨ã—ã¦ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œã¦ã„ã¾ã—ãŸï¼‰ï¼š

- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ‰€æœ‰è€…ã¯ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã®[åˆ†æ•£å‹æ¤œè¨¼ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯](https://docs.layerzero.network/v2/home/modular-security/security-stack-dvns?ref=berachain.ghost.io)ï¼ˆDVNï¼‰ã®ã‚»ãƒƒãƒˆã‚’é¸æŠã§ãã¾ã™ã€‚
- å®›å…ˆãƒã‚§ãƒ¼ãƒ³ã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å®Ÿè¡Œã¯[Executors](https://docs.layerzero.network/explore/executors?ref=berachain.ghost.io)ã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚Œã¾ã™ã€‚

ãã®ä»–ã®æ”¹å–„ç‚¹ã«åŠ ãˆã¦ã€ã“ã‚Œã‚‰ã®å¤‰æ›´ã«ã‚ˆã‚Šã€ã‚ªãƒ ãƒ‹ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã®é–‹ç™ºè€…ã«å¯¾ã—ã¦ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ€§ãŒå‘ä¸Šã—ã¾ã—ãŸã€‚è©³ç´°ã¯ã€ã“ã®[**_è¨˜äº‹_**](https://medium.com/layerzero-official/layerzero-v2-deep-dive-869f93e09850?ref=berachain.ghost.io)ã‚’ã”è¦§ãã ã•ã„ã€‚

**_ã“ã®è¨˜äº‹ã§ã¯ã€LayerZero OFT ã‚’ä½¿ç”¨ã—ã¦ã€Sepolia Testnet ã‹ã‚‰ Berachain Testnet ã«`$UNI`ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒ–ãƒªãƒƒã‚¸ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚_**

### ğŸ“‹ å¿…è¦è¦ä»¶

æ¬¡ã«é€²ã‚€å‰ã«ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«ä»¥ä¸‹ã®ã‚‚ã®ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€è¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

- Node `v20.11.0`ä»¥ä¸Š
- [pnpm](https://pnpm.io/installation?ref=berachain.ghost.io)
- [**Berachain bArtio Network**](https://docs.berachain.com/developers/network-configurations?ref=berachain.ghost.io)ã¨[**Sepolia Testnet**](https://moralis.io/how-to-add-the-sepolia-network-to-metamask-full-guide/?ref=berachain.ghost.io#:~:text=Sepolia%20test-,network,-New%20RPC%20URL)ãŒè¨­å®šã•ã‚ŒãŸã‚¦ã‚©ãƒ¬ãƒƒãƒˆ
- ãã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã«`$BERA`ã¾ãŸã¯ Berachain Testnet ãƒˆãƒ¼ã‚¯ãƒ³ãŒã‚ã‚‹ã“ã¨ â€Šâ€”â€Š[**_Berachain Faucet_**](https://bartio.faucet.berachain.com/?ref=berachain.ghost.io)ã‚’å‚ç…§ã—ã¦ãã ã•ã„
- ãã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã« Sepolia Testnet ã®`$ETH`ãŒã‚ã‚‹ã“ã¨ â€Šâ€”â€Š[**_Sepolia Faucet_**](https://faucet.quicknode.com/ethereum/sepolia?ref=berachain.ghost.io)ã‚’å‚ç…§ã—ã¦ãã ã•ã„
- Sepolia ã®`$UNI`ã‚’å–å¾—ã™ã‚‹ã“ã¨ â€Šâ€”â€Š[**_Uniswap_**](https://app.uniswap.org/swap?outputCurrency=0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984&inputCurrency=ETH&ref=berachain.ghost.io)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼ˆã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ 0.0001 ã‚’ä½¿ç”¨ã—ã¾ã™ï¼‰

### Foundry

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ Foundry ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã§ã™ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```terminal
curl -L https://foundry.paradigm.xyz | bash;

foundryup;
# foundryup installs the 'forge' and 'cast' binaries, used later
```

For more installation instructions, see Foundryâ€™s [installation guide](https://book.getfoundry.sh/getting-started/installation?ref=berachain.ghost.io). For more details using Foundry on Berachain, see this [guide](https://docs.berachain.com/developers/guides/create-erc20-contract-using-foundry?ref=berachain.ghost.io).

### LayerZero ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

ã¾ãšã€Foundry ã‚’ä½¿ç”¨ã—ã¦é–‹ç™ºç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚

æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã€Foundry ã‚’åˆæœŸåŒ–ã—ã¾ã™ï¼š

```terminal
forge init layerzero-oft --no-git --no-commit;

cd layerzero-oft;
# We observe the following basic layout
# .
# â”œâ”€â”€ foundry.toml
# â”œâ”€â”€ script
# â”‚   â””â”€â”€ Counter.s.sol
# â”œâ”€â”€ src
# â”‚   â””â”€â”€ Counter.sol
# â””â”€â”€ test
#     â””â”€â”€ Counter.t.sol
```

#### ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

[LayerZero](https://docs.layerzero.network/contracts/overview?ref=berachain.ghost.io)ã¨[OpenZeppelin](https://docs.openzeppelin.com/contracts/5.x/?ref=berachain.ghost.io)ã®ãƒ„ãƒ¼ãƒ«ã«é–¢é€£ã™ã‚‹ã„ãã¤ã‹ã®ä¾å­˜é–¢ä¿‚ã‚’åˆ©ç”¨ã—ã¾ã™ã®ã§ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„:

```terminal
# FROM: ./layerzero-oft

pnpm init;
pnpm add -D @layerzerolabs/lz-evm-oapp-v2 @layerzerolabs/toolbox-foundry @layerzerolabs/lz-evm-protocol-v2 @layerzerolabs/lz-evm-messagelib-v2 @layerzerolabs/lz-definitions @openzeppelin/contracts --ignore-workspace;
```

`foundry.toml`ã®å†…å®¹ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç½®ãæ›ãˆã¦ã€ä¾å­˜é–¢ä¿‚ã‚’å†ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¾ã™:

```toml
[profile.default]
src = "src"
out = "out"
libs = [
    'node_modules/@layerzerolabs/toolbox-foundry/lib',
    'node_modules',
]
remappings = [
    'forge-std/=node_modules/@layerzerolabs/toolbox-foundry/lib/forge-std',
    '@layerzerolabs/=node_modules/@layerzerolabs/',
    '@openzeppelin/=node_modules/@openzeppelin/',
]
```

### ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã®æ¦‚è¦

ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’æ›¸ãå‰ã«ã€Sepolia ã‹ã‚‰ Berachain ã¸ã®`$UNI`ãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒ–ãƒªãƒƒã‚¸ãƒ³ã‚°ãƒ—ãƒ­ã‚»ã‚¹ã«é–¢ä¸ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ç°¡å˜ã«èª¬æ˜ã—ã¾ã—ã‚‡ã†ï¼š

![](https://super-translator.inaridiy.workers.dev/assets/image/5759b9c6-6c68-47f7-b8dc-e87780bab428)
_Overview of Interactions_

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚½ãƒ¼ã‚¹ãƒã‚§ãƒ¼ãƒ³ä¸Šã§ã€ç§ãŸã¡ãŒä½œæˆã—ãŸ`OFT Adapter`å¥‘ç´„ã«å¯¾ã—ã¦ãƒ–ãƒªãƒƒã‚¸ãƒ³ã‚°ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
2. `$UNI`ãƒˆãƒ¼ã‚¯ãƒ³ã¯`OFT Adapter`ã«ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚
3. LayerZero ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå¥‘ç´„ã¯ã€Destination Chain ä¸Šã§`$UNI`ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®æŒ‡ç¤ºã‚’å«ã‚€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¾ã™ã€‚
4. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ DVN ã«ã‚ˆã£ã¦æ¤œè¨¼ã•ã‚Œã¾ã™ã€‚
5. ã‚¨ã‚°ã‚¼ã‚­ãƒ¥ãƒ¼ã‚¿ãƒ¼ã¯ã€Destination Chain ä¸Šã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå¥‘ç´„ã«å¯¾ã—ã¦`lzReceive()`ã‚’å‘¼ã³å‡ºã—ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚
6. `$lzUNI`ï¼ˆç§ãŸã¡ãŒä½œæˆã—ãŸ OFTï¼‰ãŒä½œæˆã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚

### ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ä½œæˆ

ä¸Šè¨˜ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ä¸¡æ–¹ã®ã‚½ãƒ¼ã‚¹ãƒã‚§ãƒ¼ãƒ³ã¨ãƒ‡ã‚¹ãƒ†ã‚£ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒ¼ãƒ³ã®ä¸¡æ–¹ã§å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã€ã„ãã¤ã‹ã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¿…è¦ã§ã™ã€‚

æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ« `./src/MyAdapter.sol` ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„:

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.22;

import {OFTAdapter} from "@layerzerolabs/lz-evm-oapp-v2/contracts/oft/OFTAdapter.sol";
import {Ownable} from "@openzeppelin/contracts/access/Ownable.sol";

contract MyAdapter is OFTAdapter {
    constructor(
        address _token, // a deployed, already existing ERC20 token address
        address _layerZeroEndpoint, // local endpoint address
        address _delegate // token owner used as a delegate in LayerZero Endpoint
    ) OFTAdapter(_token, _layerZeroEndpoint, _delegate) Ownable(_delegate) {}
}
```

ã“ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¯å˜ç´”ã« `OFTAdapter` ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€æ—¢å­˜ã®ãƒˆãƒ¼ã‚¯ãƒ³ã«å¯¾ã—ã¦ãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒ­ãƒƒã‚¯ã¨ã‚¯ãƒ­ã‚¹ãƒã‚§ãƒ¼ãƒ³æ©Ÿèƒ½ã‚’æ‹¡å¼µã™ã‚‹ãŸã‚ã®**ã‚½ãƒ¼ã‚¹ãƒã‚§ãƒ¼ãƒ³**ä¸Šã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã§ã™ã€‚OFT ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã«ã¤ã„ã¦ã®è©³ç´°ã¯[**_ã“ã¡ã‚‰_**](https://docs.layerzero.network/contracts/oft-adapter?ref=berachain.ghost.io)ã‚’ã”è¦§ãã ã•ã„ã€‚

ã•ã‚‰ã«ã€`delegate` ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒè¨­å®šã•ã‚Œã¦ãŠã‚Šã€ã“ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã«è¨­å®šã®å¤‰æ›´ãªã©ã®é‡è¦ãªã‚¿ã‚¹ã‚¯ã‚’å‡¦ç†ã™ã‚‹æ¨©é™ãŒä¸ãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

æ¬¡ã«ã€ãƒ•ã‚¡ã‚¤ãƒ« `./src/MyOFT.sol` ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„:

```solidity
// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.22;

import {Ownable} from "@openzeppelin/contracts/access/Ownable.sol";
import {OFT} from "@layerzerolabs/lz-evm-oapp-v2/contracts/oft/OFT.sol";

contract MyOFT is OFT {
    constructor(
        string memory _name,
        string memory _symbol,
        address _lzEndpoint,
        address _delegate
    ) OFT(_name, _symbol, _lzEndpoint, _delegate) Ownable(_delegate) {}
}
```

ã“ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¯ `OFT` ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’å®Ÿè£…ã—ã€**ãƒ‡ã‚¹ãƒ†ã‚£ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒ¼ãƒ³**ä¸Šã§ãƒˆãƒ¼ã‚¯ãƒ³ã®è©³ç´°ï¼ˆä¾‹: `name`ã€`symbol`ï¼‰ã‚’å®šç¾©ã™ã‚‹å ´æ‰€ã§ã™ã€‚å†åº¦ã€`delegate` ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç”Ÿæˆã•ã‚ŒãŸ `src/Counter.sol`ã€`test/Counter.t.sol`ã€`script/Counter.s.sol` ã‚’å‰Šé™¤ã—ã¦ã‚‚æ§‹ã„ã¾ã›ã‚“ï¼‰ã€‚

### ãƒ‡ãƒ—ãƒ­ã‚¤ã¨å®Ÿè¡Œ

#### **ã‚¹ãƒ†ãƒƒãƒ— 1: OFT ã‚¢ãƒ€ãƒ—ã‚¿ã‚’ Sepolia ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹**

ä»¥ä¸‹ã®å†…å®¹ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã«`/.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€`PRIVATE_KEY`ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚

```text
PRIVATE_KEY=
SEPOLIA_ADAPTER_ADDRESS=
BERACHAIN_OFT_ADDRESS=
```

ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«ã€ã„ãã¤ã‹ã® Foundry ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ã¾ãšã€`./script/MyAdapter.s.sol`ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®å†…å®¹ã§åŸ‹ã‚ã¦ãã ã•ã„ã€‚

```solidity
// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.22;

import {Script} from "forge-std/Script.sol";
import "../src/MyAdapter.sol";

contract MyAdapterScript is Script {
    address constant UNI_TOKEN = 0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984;
    address constant LAYERZERO_ENDPOINT =
        0x6EDCE65403992e310A62460808c4b910D972f10f;

    function run() public {
        // Setup
        uint256 privateKey = vm.envUint("PRIVATE_KEY");
        vm.startBroadcast(privateKey);

        // Deploy
        MyAdapter myAdapter = new MyAdapter(
            UNI_TOKEN,
            LAYERZERO_ENDPOINT,
            vm.addr(privateKey) // Address of private key
        );

        vm.stopBroadcast();
    }
}
```

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`MyAdapter`ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒ Sepolia Testnet ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã™ã€‚

ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ•ãƒ©ã‚°`â€”â€Šetherscan-api-key YOUR_ETHERSCAN_API_KEYâ€Šâ€”â€Šverify`ã‚’è¿½åŠ ã—ã¦ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼‰ã€‚

```terminal
# FROM: ./layerzero-oft

forge script script/MyAdapter.s.sol --rpc-url https://rpc.sepolia.org/ --broadcast

# [Example Output]:
# ##### sepolia
# âœ…  [Success]Hash: 0x16702f69752f1f7243793202435da6bd54d2ebec89294728c2bf0d55584ed732
# Contract Address: 0xB66e0518570eA48286983322fc8F85301f955406
# Block: 5525968
# Paid: 0.007448778064556076 ETH (2482926 gas * 3.000000026 gwei)
```

**.env ãƒ•ã‚¡ã‚¤ãƒ«ã® `SEPOLIA_ADAPTER_ADDRESS` ã‚’ `MyAdapter` ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã§æ›´æ–°ã™ã‚‹ã€‚**

#### ã‚¹ãƒ†ãƒƒãƒ— 2ï¼šOFT ã‚’ Berachain ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹

æ¬¡ã«ã€`./script/MyOFT.s.sol` ã‚’ä½œæˆã—ã€ãã®ä¸­ã«ä»¥ä¸‹ã‚’å…¥åŠ›ã—ã¾ã™ï¼š

```solidity
// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.22;

import {Script} from "forge-std/Script.sol";
import "../src/MyOFT.sol";

contract MyOFTScript is Script {
    address constant LAYERZERO_ENDPOINT =
        0x6EDCE65403992e310A62460808c4b910D972f10f;

    uint32 constant SEPOLIA_ENDPOINT_ID = 40161;

    function run() public {
        // Setup
        address SEPOLIA_ADAPTER_ADDRESS = vm.envAddress(
            "SEPOLIA_ADAPTER_ADDRESS"
        );
        uint256 privateKey = vm.envUint("PRIVATE_KEY");
        vm.startBroadcast(privateKey);

        // Deploy
        MyOFT myOFT = new MyOFT(
            "Layer Zero UNI",
            "lzUNI",
            LAYERZERO_ENDPOINT,
            vm.addr(privateKey) // Wallet address of signer
        );

        // Hook up Berachain OFT to Sepolia's adapter
        myOFT.setPeer(
            SEPOLIA_ENDPOINT_ID,
            bytes32(uint256(uint160(SEPOLIA_ADAPTER_ADDRESS)))
        );
        vm.stopBroadcast();
    }
}
```

æ¬¡ã«ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¦ã€1ï¼‰OFT ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ Berachain ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€2ï¼‰Sepolia ãƒ”ã‚¢ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’èªè­˜ã•ã›ã¾ã™ï¼š

```terminal
# FROM: ./layerzero-oft

forge script script/MyOFT.s.sol --rpc-url https://bartio.rpc.berachain.com/ --broadcast

# [Example Output]
# ##### 80085
# âœ…  [Success]Hash: 0x16cf8daa6f335fb65dedee8e722c01adb45b87aeccad0d6dc751d6c04c466a5f
# Contract Address: 0x42993d9A691636cbb23C201729b36B5C6e750733
# Block: 1147280
# Paid: 0.040444634965884468 ETH (2842719 gas * 14.227447372 gwei)
#
# ##### 80085
# âœ…  [Success]Hash: 0xd670e01e028fe50d9e8c323007a777590d202fada28d80d6a9f9973abcb8b607
# Block: 1147281
# Paid: 0.000682799744815656 ETH (47666 gas * 14.324670516 gwei)
```

**.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®`BERACHAIN_OFT_ADDRESS`ã‚’`MyOFT` ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã§æ›´æ–°ã—ã¦ãã ã•ã„ã€‚**

#### ã‚¹ãƒ†ãƒƒãƒ— 3ï¼šSepolia ã‹ã‚‰ Berachain ã¸ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒ–ãƒªãƒƒã‚¸ã™ã‚‹

æ¬¡ã«ã€ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµã³ã¤ã‘ã€`$UNI`ã‚’ Sepolia ã‹ã‚‰ Berachain ã«ãƒ–ãƒªãƒƒã‚¸ã—ã¾ã™ã€‚

./script/Bridge.s.sol`ã‚’ä½œæˆã—ã€æ¬¡ã®ã‚ˆã†ã«å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š

```solidity
pragma solidity ^0.8.22;

import "forge-std/Script.sol";
import {IOFT, SendParam} from "@layerzerolabs/lz-evm-oapp-v2/contracts/oft/interfaces/IOFT.sol";
import {IOAppCore} from "@layerzerolabs/lz-evm-oapp-v2/contracts/oapp/interfaces/IOAppCore.sol";
import {MessagingFee} from "@layerzerolabs/lz-evm-oapp-v2/contracts/oft/OFTCore.sol";
import {OptionsBuilder} from "@layerzerolabs/lz-evm-oapp-v2/contracts/oapp/libs/OptionsBuilder.sol";
import "@openzeppelin/contracts/token/ERC20/IERC20.sol";

interface IAdapter is IOAppCore, IOFT {}

contract SendOFTScript is Script {
    using OptionsBuilder for bytes;

    uint32 constant BERACHAIN_ENPOINT_ID = 40291;
    address constant SEPOLIA_UNI_ADDRESS =
        0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984;

    function run() external {
        address SEPOLIA_ADAPTER_ADDRESS = vm.envAddress(
            "SEPOLIA_ADAPTER_ADDRESS"
        );
        address BERACHAIN_OFT_ADDRESS = vm.envAddress("BERACHAIN_OFT_ADDRESS");

        uint256 privateKey = vm.envUint("PRIVATE_KEY");
        vm.startBroadcast(privateKey);
        address signer = vm.addr(privateKey);

        // Get the Adapter contract instance
        IAdapter sepoliaAdapter = IAdapter(SEPOLIA_ADAPTER_ADDRESS);

        // Hook up Sepolia Adapter to Berachain's OFT
        sepoliaAdapter.setPeer(
            BERACHAIN_ENPOINT_ID,
            bytes32(uint256(uint160(BERACHAIN_OFT_ADDRESS)))
        );

        // Define the send parameters
        uint256 tokensToSend = 0.0001 ether; // 0.0001 $UNI tokens

        bytes memory options = OptionsBuilder
            .newOptions()
            .addExecutorLzReceiveOption(200000, 0);

        SendParam memory sendParam = SendParam(
            BERACHAIN_ENPOINT_ID,
            bytes32(uint256(uint160(signer))),
            tokensToSend,
            tokensToSend,
            options,
            "",
            ""
        );

        // Quote the send fee
        MessagingFee memory fee = sepoliaAdapter.quoteSend(sendParam, false);
        console.log("Native fee: %d", fee.nativeFee);

        // Approve the OFT contract to spend UNI tokens
        IERC20(SEPOLIA_UNI_ADDRESS).approve(
            SEPOLIA_ADAPTER_ADDRESS,
            tokensToSend
        );

        // Send the tokens
        sepoliaAdapter.send{value: fee.nativeFee}(sendParam, fee, signer);

        console.log("Tokens bridged successfully!");
    }
}
```

1. ã¾ãšã€ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸ Sepolia ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«æ¥ç¶šã—ã¾ã™ã€‚
2. æ¬¡ã«ã€`setPeer`ã‚’å‘¼ã³å‡ºã—ã¦ã€Berachain ã«ã‚ã‚‹ OFT ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®æƒ…å ±ã‚’ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã«ä¼ãˆã¾ã™ã€‚
3. ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã—ã¦ã€Executor ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡ã«æ”¯æ‰•ã†ã‚¬ã‚¹é‡ã‚’è¨­å®šã—ã¾ã™ï¼ˆè©³ç´°ã¯[**_ã“ã¡ã‚‰_**](https://docs.layerzero.network/contracts/options?ref=berachain.ghost.io)ã‚’å‚ç…§ï¼‰ã€‚ã¾ãŸã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚’æº–å‚™ã—ã€ã“ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®`fee`ï¼ˆæ‰‹æ•°æ–™ï¼‰ã®è¦‹ç©ã‚‚ã‚Šã‚’è¦æ±‚ã—ã¾ã™ã€‚
4. ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«å¯¾ã—ã¦ã€ç§ãŸã¡ã®`$UNI`ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹æ¨©é™ã‚’ä¸ãˆã¾ã™ã€‚
5. æœ€å¾Œã«ã€ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®`send`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã¨`fee`ã‚’å¼•æ•°ã¨ã—ã¦å‘¼ã³å‡ºã—ã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

```terminal
# FROM: ./layerzero-oft

forge script script/Bridge.s.sol --rpc-url https://rpc.sepolia.org/ --broadcast
```

ã—ã°ã‚‰ãã™ã‚‹ã¨ã€LayerZero ã® Executor ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã—ã€ãƒ–ãƒªãƒƒã‚¸ã•ã‚ŒãŸ `$lzUNI` ãƒˆãƒ¼ã‚¯ãƒ³ãŒ Berachain ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã«è¡¨ç¤ºã•ã‚Œã¾ã™ï¼

![](https://super-translator.inaridiy.workers.dev/assets/image/3df0fdec-b654-43e2-a6cc-20a0b87980a2)

### ã¾ã¨ã‚

ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼LayerZero OFTs ã‚’ä½¿ç”¨ã—ã¦ã€æ—¢å­˜ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ Berachain ã¸æˆåŠŸè£ã«ãƒ–ãƒªãƒƒã‚¸ã—ã¾ã—ãŸ ğŸ‰

OFTs ã‚„ã‚¯ãƒ­ã‚¹ãƒã‚§ãƒ¼ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ãŒå¯èƒ½ã«ã™ã‚‹ã™ã¹ã¦ã«ã¤ã„ã¦ã•ã‚‰ã«å­¦ã³ãŸã„å ´åˆã¯ã€ãœã²[**_LayerZero ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ_**](https://docs.layerzero.network/contracts/overview?ref=berachain.ghost.io)ã‚’ã”è¦§ãã ã•ã„ã€‚

**_Disclaimer:_ OFT ã¨ OFT ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¯ã€ãƒ—ãƒ­ãƒˆã‚³ãƒ«é–‹ç™ºè€…ãŒè‡ªèº«ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ–°ã—ã„ãƒã‚§ãƒ¼ãƒ³ã«å±•é–‹ã™ã‚‹ãŸã‚ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚æ—¢å­˜ãƒˆãƒ¼ã‚¯ãƒ³ã®éå…¬èª OFT ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã¯ã€ã‚µãƒãƒ¼ãƒˆã‚’å¾—ã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒä½ã„ã§ã—ã‚‡ã†ã€‚**

---

### ğŸ» Full Code Repository

æœ€çµ‚çš„ãªã‚³ãƒ¼ãƒ‰ã‚„ä»–ã®ã‚¬ã‚¤ãƒ‰ã‚’è¦‹ãŸã„å ´åˆã¯ã€[**_Berachain LayerZero Guide Code_**](https://github.com/berachain/guides/tree/main/apps/layerzero-oft?ref=berachain.ghost.io)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
[**_Berachain GitHub Guides Repo_**](https://github.com/berachain/guides?ref=berachain.ghost.io)
https://github.com/berachain/guides/tree/main/apps/pyth-oracle?ref=berachain.ghost.io

### ğŸ› ï¸ ã•ã‚‰ã«é–‹ç™ºã‚’é€²ã‚ãŸã„ã§ã™ã‹ï¼Ÿ

Berachain ã§ã•ã‚‰ã«é–‹ç™ºã‚’é€²ã‚ãŸã„ã€ã‚ˆã‚Šå¤šãã®å®Ÿè£…ä¾‹ã‚’è¦‹ãŸã„ã¨ãŠè€ƒãˆã§ã™ã‹ï¼Ÿç§ãŸã¡[**_Berachain GitHub Guides Repo_**](https://github.com/berachain/guides?ref=berachain.ghost.io) ã‚’ãœã²ã”è¦§ãã ã•ã„ã€‚ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ã€NextJSã€Hardhatã€Viemã€Foundry ãªã©ã€æ§˜ã€…ãªæŠ€è¡“ã‚’ä½¿ç”¨ã—ãŸå¹…åºƒã„å®Ÿè£…ä¾‹ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

https://github.com/berachain/guides/tree/main?ref=berachain.ghost.io

ã‚ˆã‚Šè©³ç´°ãªæƒ…å ±ã‚’æ¢æ±‚ã—ãŸã„å ´åˆã¯ã€[**_Berachain ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ_**](https://docs.berachain.com/?ref=berachain.ghost.io)ã‚’ã”è¦§ãã ã•ã„ã€‚

https://docs.berachain.com/?ref=berachain.ghost.io

### é–‹ç™ºè€…ã‚µãƒãƒ¼ãƒˆã‚’ãŠæ¢ã—ã§ã™ã‹ï¼Ÿ

è³ªå•ã‚’ã™ã‚‹ãŸã‚ã«ã€[**_Berachain Discord_**](https://discord.com/invite/berachain?ref=berachain.ghost.io)ã‚µãƒ¼ãƒãƒ¼ã«å‚åŠ ã—ã€é–‹ç™ºè€…ãƒãƒ£ãƒ³ãƒãƒ«ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚

## â¤ï¸ ã“ã®è¨˜äº‹ã«å¯¾ã—ã¦æ„›ã‚’ç¤ºã™ã®ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ ğŸ‘ğŸ¼

---

---

:::note info
ã€Sunrise ã¨ã¯ã€‘
Sunrise ã¯ Proof of Liquidity(PoL)ã¨ Fee Abstractionï¼ˆæ‰‹æ•°æ–™æŠ½è±¡åŒ–ï¼‰ã‚’å‚™ãˆãŸãƒ‡ãƒ¼ã‚¿å¯ç”¨æ€§ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã™ã€‚ ç§ãŸã¡ã¯ DA ã®ä½“é¨“ã‚’å†æ§‹ç¯‰ã—ã€å¤šæ§˜ãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼å‹æµå‹•æ€§ã‚’æ´»ç”¨ã—ã¦ãƒ­ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ã‚’ç«‹ã¡ä¸Šã’ã¦ã„ã¾ã™ã€‚

- [Sunrise - Specialized DA Layer for Proof of Liquidity](https://sunriselayer.io/)
- [Sunrise / Gluon Docs](https://docs.sunriselayer.io/)

ã€Social Linksã€‘

- [X(æ—§ Twitter)[è‹±èª])](https://twitter.com/SunriseLayer)
- [X(æ—§ Twitter)[æ—¥æœ¬èª])](https://twitter.com/SunriseLayer)
- [Discord Community](https://discord.com/invite/sunrise)
- [Medium](https://sunriselayer.medium.com/)
- [Github](https://github.com/sunriselayer)
- [Linkedin](https://www.linkedin.com/company/sunriselayer)

ã€ãŠå•åˆã›ã€‘
Sunrise ã¸ã®ãŠå•ã„åˆã‚ã›ã¯ã“ã¡ã‚‰ã‹ã‚‰ ğŸ‘‰ [Google Form](https://forms.gle/h8RVahxRtXUvYwnv6)

![1080x360.jpeg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3839047/8971d83b-3331-4757-dc72-320d28618735.jpeg)

:::
